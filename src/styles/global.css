/* Import Tailwind's base styles first - this establishes the foundation */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* Custom base layer - applies after Tailwind base but before components */
@layer base {
  /* Typography Base - Inter font with OpenType features */
  html {
    /* Enable Inter's OpenType features for better typography */
    font-feature-settings: "kern" 1, "liga" 1, "calt" 1, "cv05" 1, "cv08" 1;
    -webkit-tap-highlight-color: transparent;
    font-synthesis: weight style;
    -webkit-font-synthesis: weight style;

    /* Inter-specific optimizations */
    letter-spacing: -0.011em; /* Inter's recommended letter spacing */
  }

  /* Apply Inter's recommended settings for headings */
  h1, h2, h3, h4, h5, h6 {
    letter-spacing: -0.022em; /* Tighter spacing for headings */
    font-feature-settings: "kern" 1, "liga" 1, "calt" 1, "cv05" 1, "cv08" 1;
  }

  /* Prevent font scaling issues on iOS */
  @supports (-webkit-touch-callout: none) {
    body {
      -webkit-text-size-adjust: 100%;
      -webkit-font-synthesis: weight style;
      font-synthesis: weight style;
    }

    /* Enable font synthesis for all elements on iOS */
    * {
      -webkit-font-synthesis: weight style;
      font-synthesis: weight style;
    }
  }

  /* Optimize font rendering for HiDPI displays */
  @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
    body {
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
  }
}

/* Custom component styles */
@layer components {
  .bg-box {
    background-color: rgba(255, 255, 255, 0.05);
  }

  /* Gradient text components that preserve font weight */
  .gradient-text,
  .accent-gradient {
    /* Use font-weight from parent/class - don't override */
    font-synthesis: weight;
    -webkit-font-synthesis: weight;
  }

  /* Mobile-specific gradient text optimization */
  @media (max-width: 768px) {
    .gradient-text,
    .accent-gradient {
      /* On mobile, use solid color to preserve font rendering */
      -webkit-text-fill-color: currentColor;
      background-clip: unset;
      -webkit-background-clip: unset;
    }

    .gradient-text {
      color: #e5e5e5;
    }

    .accent-gradient {
      color: #4CD6C0;
    }
  }
}

/* Custom utilities - highest specificity for one-off adjustments */
@layer utilities {
  .text-rendering-optimized {
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  .prevent-font-scaling {
    -webkit-text-size-adjust: 100%;
    -moz-text-size-adjust: 100%;
    -ms-text-size-adjust: 100%;
    text-size-adjust: 100%;
  }
}
